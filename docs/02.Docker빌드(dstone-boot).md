[Dstone Document Index](../../docs/Index.md)

# ğŸ³ Dstone-Boot Docker ë¹Œë“œ ë° ì‹¤í–‰ ê°€ì´ë“œ

---

## 1. ì»¨í…Œì´ë„ˆ êµ¬ì„± ê°œìš”

ì´ ê°€ì´ë“œëŠ” Docker Composeë¥¼ ì‚¬ìš©í•˜ì—¬ `dstone-boot` ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ê´€ë ¨ ì¸í”„ë¼ ì„œë¹„ìŠ¤ë¥¼ ì»¨í…Œì´ë„ˆë¡œ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

**êµ¬ì„± ì»¨í…Œì´ë„ˆ:**

1.  **`dstone-mysql`**: ë°ì´í„°ë² ì´ìŠ¤ (MySQL)
2.  **`dstone-rabbitmq`**: ë©”ì‹œì§€ í (RabbitMQ)
3.  **`dstone-redis`**: ì¸ë©”ëª¨ë¦¬ ìºì‹œ ë° ë°ì´í„° ì €ì¥ì†Œ (Redis)
4.  **`dstone-boot`**: ë©”ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë ˆì„ì›Œí¬

> ëª¨ë“  ì»¨í…Œì´ë„ˆëŠ” **í†µí•© ì‹¤í–‰** ë˜ëŠ” **ê°œë³„ ì‹¤í–‰**ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

---

## 2. í˜¸ìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡° ë° ì‚¬ì „ ì‘ì—…

1.  **ì‘ì—… ë””ë ‰í† ë¦¬ ìƒì„±**
    -   í˜¸ìŠ¤íŠ¸ ë¨¸ì‹ ì— `/workshop` ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

2.  **í…œí”Œë¦¿ íŒŒì¼ ë³µì‚¬**
    -   `dstone-boot` ê´€ë ¨ ì„¤ì • íŒŒì¼ê³¼ `docker-compose` íŒŒì¼ì„ ì•„ë˜ êµ¬ì¡°ì— ë§ê²Œ `/workshop` ë””ë ‰í† ë¦¬ë¡œ ë³µì‚¬í•©ë‹ˆë‹¤.

    ```text
    /workshop
      â”œâ”€ dstone-boot/
      â”‚  â”œâ”€ conf/
      â”‚  â”œâ”€ target/
      â”‚  â”œâ”€ 01.dstone-boot-docker.yml
      â”‚  â””â”€ 02.dstone-boot-docker-reg.sh
      â”œâ”€ dstone-mysql/
      â”‚  â”œâ”€ init-db/
      â”‚  â”œâ”€ 01.dstone-mysql-docker.yml
      â”‚  â””â”€ 02.dstone-mysql-docker-reg.sh
      â”œâ”€ dstone-rabbitmq/
      â”‚  â”œâ”€ init-data/
      â”‚  â”œâ”€ 01.dstone-rabbitmq-docker.yml
      â”‚  â””â”€ 02.dstone-rabbitmq-docker-reg.sh
      â”œâ”€ dstone-redis/
      â”‚  â”œâ”€ 01.dstone-redis-docker.yml
      â”‚  â””â”€ 02.dstone-redis-docker-reg.sh
      â””â”€ dstone-boot-docker-compose.yml  # í†µí•© ì‹¤í–‰ìš© ë©”ì¸ Compose íŒŒì¼
    ```

3.  **ì‹¤í–‰ íŒŒì¼ ì¤€ë¹„**
    > âš ï¸ **ì¤‘ìš”:** `target` ë””ë ‰í† ë¦¬ëŠ” `.gitignore`ì— ì˜í•´ ë²„ì „ ê´€ë¦¬ì—ì„œ ì œì™¸ë©ë‹ˆë‹¤. ë”°ë¼ì„œ Gitì—ì„œ ì†ŒìŠ¤ë¥¼ ë°›ì€ í›„, `dstone-boot` í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ì—¬ ìƒì„±ëœ `*.war` íŒŒì¼ì„ `/workshop/dstone-boot/target/` ë””ë ‰í† ë¦¬ì— ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì•¼ í•©ë‹ˆë‹¤.

4.  **íŒŒì¼ ê¶Œí•œ ì„¤ì • ë° í˜•ì‹ ë³€í™˜ (Linux/WSL)**
    -   ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ë° íŒŒì¼ ì ‘ê·¼ ê¶Œí•œì„ ì„¤ì •í•©ë‹ˆë‹¤.
    ```bash
    cd /workshop
    sudo chown -R root:root *
    sudo chmod -R 777 *
    # Windowsì—ì„œ ì‘ì„±ëœ íŒŒì¼ì˜ ê²½ìš°, ê°œí–‰ ë¬¸ìë¥¼ ë³€í™˜í•©ë‹ˆë‹¤.
    find . -name "*.sh" -exec dos2unix {} \;
    ```

---

## 3. í†µí•© ì‹¤í–‰ (ì „ì²´ ì„œë¹„ìŠ¤)

`dstone-boot-docker-compose.yml` íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ í•œ ë²ˆì— ì‹¤í–‰í•©ë‹ˆë‹¤.

### 3.1. ì‹¤í–‰ ë° ë¡œê·¸ í™•ì¸

-   **ëª¨ë“  ì„œë¹„ìŠ¤ ì‹¤í–‰**
    ```bash
    # -p dstone: 'dstone'ì„ í”„ë¡œì íŠ¸ ì´ë¦„ìœ¼ë¡œ ì§€ì •í•˜ì—¬ ê´€ë ¨ ë¦¬ì†ŒìŠ¤(ë„¤íŠ¸ì›Œí¬ ë“±)ë¥¼ ê·¸ë£¹í™”í•©ë‹ˆë‹¤.
    docker compose -p dstone -f /workshop/dstone-boot-docker-compose.yml up -d
    ```

-   **ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸**
    ```bash
    docker compose -p dstone -f /workshop/dstone-boot-docker-compose.yml logs -f
    ```

### 3.2. ì¤‘ì§€ ë° ì‚­ì œ

-   **ì„œë¹„ìŠ¤ ì¤‘ì§€ ë° ì»¨í…Œì´ë„ˆ ì‚­ì œ**
    ```bash
    docker compose -p dstone -f /workshop/dstone-boot-docker-compose.yml down
    ```

-   **ì„œë¹„ìŠ¤ ì¤‘ì§€ ë° ì»¨í…Œì´ë„ˆ/ë³¼ë¥¨ ëª¨ë‘ ì‚­ì œ**
    > âš ï¸ **ì£¼ì˜:** `-v` ì˜µì…˜ì€ `dstone-mysql`ì˜ ë°ì´í„° ë³¼ë¥¨ì„ í¬í•¨í•œ ëª¨ë“  Docker ë³¼ë¥¨ì„ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ì •ë³´ë¥¼ ìœ ì§€í•˜ë ¤ë©´ ì´ ì˜µì…˜ì„ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.
    ```bash
    docker compose -p dstone -f /workshop/dstone-boot-docker-compose.yml down -v
    ```

---

## 4. ê°œë³„ ì‹¤í–‰ (ì„œë¹„ìŠ¤ ë‹¨ìœ„)

ê° ì„œë¹„ìŠ¤ì˜ `01.*-docker.yml` íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ê°œë³„ì ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ë‹¨ìœ„ì˜ í…ŒìŠ¤íŠ¸ ë° ê°œë°œì— ìœ ìš©í•©ë‹ˆë‹¤.

### 4.1. ì‹¤í–‰ ìˆœì„œ ë° ì£¼ì˜ì‚¬í•­

> âš ï¸ **ì‹¤í–‰ ìˆœì„œ:** `dstone-boot` ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì— ì˜ì¡´í•˜ë¯€ë¡œ, **ë°˜ë“œì‹œ `dstone-mysql`, `dstone-redis`, `dstone-rabbitmq`ë¥¼ ë¨¼ì € ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.** ì´ ì„¸ ì„œë¹„ìŠ¤ ê°„ì˜ ì‹¤í–‰ ìˆœì„œëŠ” ë¬´ê´€í•©ë‹ˆë‹¤.

### 4.2. ì„œë¹„ìŠ¤ë³„ ì‹¤í–‰ ëª…ë ¹ì–´

-   **1. MySQL ì‹¤í–‰**
    ```bash
    docker compose -p dstone -f /workshop/dstone-mysql/01.dstone-mysql-docker.yml up -d
    ```
-   **2. Redis ì‹¤í–‰**
    ```bash
    docker compose -p dstone -f /workshop/dstone-redis/01.dstone-redis-docker.yml up -d
    ```
-   **3. RabbitMQ ì‹¤í–‰**
    ```bash
    docker compose -p dstone -f /workshop/dstone-rabbitmq/01.dstone-rabbitmq-docker.yml up -d
    ```
-   **4. Boot Application ì‹¤í–‰**
    ```bash
    docker compose -p dstone -f /workshop/dstone-boot/01.dstone-boot-docker.yml up -d
    ```

### 4.3. ì„œë¹„ìŠ¤ë³„ ë¡œê·¸ ë° ì¤‘ì§€ ëª…ë ¹ì–´

-   **ë¡œê·¸ í™•ì¸** (ì˜ˆ: `dstone-boot`)
    ```bash
    docker compose -p dstone -f /workshop/dstone-boot/01.dstone-boot-docker.yml logs -f
    ```
-   **ì¤‘ì§€ ë° ì‚­ì œ** (ì˜ˆ: `dstone-boot`)
    ```bash
    docker compose -p dstone -f /workshop/dstone-boot/01.dstone-boot-docker.yml down -v
    ```

### 4.4. ê°œë³„ ì»¨í…Œì´ë„ˆ ì œì–´

```bash
docker stop dstone-boot
docker start dstone-boot
```
---

## 5. Docker Hub ì´ë¯¸ì§€ ë“±ë¡

í•„ìš”ì— ë”°ë¼ ê° ì„œë¹„ìŠ¤ì˜ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ì—¬ Docker Hubì— í‘¸ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê° ì„œë¹„ìŠ¤ ë””ë ‰í† ë¦¬ì˜ `02.*-docker-reg.sh` ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

-   `/workshop/dstone-mysql/02.dstone-mysql-docker-reg.sh`
-   `/workshop/dstone-redis/02.dstone-redis-docker-reg.sh`
-   `/workshop/dstone-rabbitmq/02.dstone-rabbitmq-docker-reg.sh`
-   `/workshop/dstone-boot/02.dstone-boot-docker-reg.sh`
