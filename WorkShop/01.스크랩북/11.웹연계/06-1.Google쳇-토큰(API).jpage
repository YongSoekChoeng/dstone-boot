/*****************************************************/String url 		= "https://oauth2.googleapis.com/token";String method 	= "POST";String iss 		= "dstone@endless-terra-461922-p7.iam.gserviceaccount.com";String scope 	= "https://www.googleapis.com/auth/chat.bot";/*****************************************************/net.dstone.common.utils.DateUtil.stopWatchStart("00.웹호출");net.dstone.common.utils.WsUtil ws = new net.dstone.common.utils.WsUtil();try {		net.dstone.common.utils.DataSet headerDs = new net.dstone.common.utils.DataSet();	headerDs.setDatum("alg", "RS256");	headerDs.setDatum("typ", "JWT");		net.dstone.common.utils.DataSet ds = new net.dstone.common.utils.DataSet();	ds.setDatum("iss", iss);	ds.setDatum("scope", scope);	ds.setDatum("aud", url);	ds.setDatum("iat", String.valueOf(System.currentTimeMillis()));	ds.setDatum("exp", String.valueOf(System.currentTimeMillis()+6000));	String plainStr = headerDs.toJson() + "." + ds.toJson(); 		String secretKey = "-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC6sxUPTF8pq1d7\neYkgZ0NaGpLuuWfgDCNUoRCQwqdijDnk5Qqrv+NW8CYJrh0z12f5CWjsgW326nwW\niG3l/xgb5d1jVU/5HFQTxH2uGeVgjWj/uElumXArbLNvfJZaGnPfwc90ktw1DJIE\n7tVqlwd1pKAlit+8HXg2Y8on/znnUcwDCYaHGB/L3tSo6llJD6Z6vQvDEBhlPRst\ngflOI5SKI4pNiCRi2njbTDGYElkvfpLMxne/rU974ZUnoteV4nnE/6A5+ISeMkoh\nZwrJqYxfp1TPWa7t6u20DXPJnkVc0CH3aTP0N4NRFD7DYYWiU6DSRDQRlmqV5Gx4\nj3aP4SF3AgMBAAECggEARvm+t1am1M4FD3VIKq/nHHF+y09jzHqA0fL7O7Uschvy\nBHEIafukfxADvelZw7QPnE61+zdHKTfCXcSW1vlv3mc4D0PHB+J7mho4V0AUAe0w\nbgrOq8OcL33/BxKbi/yDcZyZ8+zC104EkuiC7Kcm2FPx5+PQI5EmerLcDvGJv0Sk\nS/hi7dqFhBadiyzLVArIRMq9nUKcV6MNmmuIMwkum5yNQYOq+W4kShC45zpoYlP1\nM7+FXUF41iWt7xm1yoF0IcrPMs6FPd887or1cVFaIE/jPaT3Zccquz3Bgfo7lsIf\nKXgL7mRk45jMnyxi+UXpRIeg0GoLT1PQVKMd3g7+vQKBgQDpwrrkn88HtA7Py1p/\n1ZcxrxcA04uktyNlIYkv0vDSVt8R1G1tu4qOh65lpa5M8AANHErfXeuV4zhYhuld\nNGmGlNGxUPW5/S33rxt/BG0NAXoKkx32CzBJzOlPuodzqUZiI1GepTJ1PzlGmjpz\nNB339b8iIHstl7W8WE4LsIHsbQKBgQDMdiw2NQ2t8Hz+mDtohMciis/3XIjJdFRb\n8b+O9A5Cg2GPlhiwfMrdjB/ZdYtuag+FAlUP82nnBDC1ZiJaNlMa7g87MRAmEYzp\nWXTBLDNSiScNa+m3Q8rimP0TzSAaIDC94rODwRSrl8eT8+V/6ma6ZtRUOJ9yOX6O\nFxChjMbO8wKBgG84tc+9sbWKmFmJ+d9E8xEyq5E7FgAjGvYtRKa6iNareqtzFTXW\nu5AhQnsen5X/wyZ5xa4Nc9/3IoIMftBX9bWQ7Uyepqv9qHdmm4CNzI0ZnMWXRfQh\nUrJqir/ikjwX2GMtRtJi62UZ1dif3RufOnsWNAC6z6DbxB5/LXMmYkrpAoGBALdf\n/UMYzg4EtHY63n1dKKSITwERkvTrSoW0ChQSO3/YCXYYLkiLg/6zoBUO4WDD6utm\nLhhCPecd0PnAgmraciqi/DIgTNV3xCO9QYPHOrh5nfbhpBnjyWD1yXUq8fG8kTqc\nylgOoZVMaYj+pATXnA7uDt0Cc66kdibF9PqPIfeVAoGBAJNdaVpfvlHDfXfzhUCJ\nnf+kNlnIC3hCCmColZ0oBM/3OHyQZHOOgC8qdb7T4XTLgyvFedMCm0s1pLf9NyJQ\nqAGvt1feSz0xNHcoiTzZqWgAa+2qfHOFWVf5dpQTXHI91aI8StnyVavX0FCJ6nsB\nfLZSk2Shl1odQp12/tUNvafc\n-----END PRIVATE KEY-----\n"; 	secretKey = net.dstone.common.utils.StringUtil.replace(secretKey, "-----BEGIN PRIVATE KEY-----", "");	secretKey = net.dstone.common.utils.StringUtil.replace(secretKey, "-----END PRIVATE KEY-----", "");	secretKey = secretKey.replaceAll("\\s+", "");	    byte[] keyBytes = java.util.Base64.getDecoder().decode(secretKey);    java.security.spec.PKCS8EncodedKeySpec keySpec = new java.security.spec.PKCS8EncodedKeySpec(keyBytes);    java.security.interfaces.RSAPrivateKey privateKey = (java.security.interfaces.RSAPrivateKey) java.security.KeyFactory.getInstance("RSA").generatePrivate(keySpec);    	java.time.Instant now = java.time.Instant.now();    String jwt = com.auth0.jwt.JWT.create()            .withIssuer(iss)            .withAudience(url)            .withClaim("scope", scope)            .withIssuedAt(now)            .withExpiresAt(now.plusSeconds(3600))            .sign(com.auth0.jwt.algorithms.Algorithm.RSA256(null, privateKey));	net.dstone.common.utils.WsUtil.Bean wsBean = new net.dstone.common.utils.WsUtil.Bean();		net.dstone.common.utils.DataSet paramDs = new net.dstone.common.utils.DataSet();	paramDs.setDatum("grant_type", "urn:ietf:params:oauth:grant-type:jwt-bearer");	paramDs.setDatum("assertion", jwt);			wsBean.url = url;	wsBean.method = method;			wsBean.addHeader("Content-Type", "application/x-www-form-urlencoded");	wsBean.setParameters(paramDs);		ws.execute(wsBean);	String responseStr = ws.response.outputStr.toString();		//System.out.println( "responseStr["+responseStr+"]" );	net.dstone.common.utils.DataSet resDs = new net.dstone.common.utils.DataSet();	resDs.buildFromJson(responseStr, "");		resDs.checkData();		System.out.println( "access_token:\n"+ resDs.getDatum("access_token") );	System.out.println("");	} catch (Exception e) {	e.printStackTrace();} finally{	net.dstone.common.utils.DateUtil.stopWatchEnd("00.웹호출");}