/*****************************************************/String url 		= "https://oauth2.googleapis.com/token";String method 	= "POST";String iss 		= "dstone@endless-terra-461922-p7.iam.gserviceaccount.com";String scope 	= "https://www.googleapis.com/auth/chat.bot";/*****************************************************/net.dstone.common.utils.DateUtil.stopWatchStart("00.웹호출");net.dstone.common.utils.WsUtil ws = new net.dstone.common.utils.WsUtil();try {		net.dstone.common.utils.DataSet headerDs = new net.dstone.common.utils.DataSet();	headerDs.setDatum("alg", "RS256");	headerDs.setDatum("typ", "JWT");		net.dstone.common.utils.DataSet ds = new net.dstone.common.utils.DataSet();	ds.setDatum("iss", iss);	ds.setDatum("scope", scope);	ds.setDatum("aud", url);	ds.setDatum("iat", String.valueOf(System.currentTimeMillis()));	ds.setDatum("exp", String.valueOf(System.currentTimeMillis()+6000));	String plainStr = headerDs.toJson() + "." + ds.toJson(); 		String secretKey = "-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCjvv3WE257ClJc\nM8wqSc3fli3Yl7n8QeEYTAFgbzlDTSE/G/9AR0Wc/CgM51dZvF0p/m1Y1hsFcXf+\nEQq4iRHaDZMcHMSF2w7n3KPTimzUEwfKJULaO8BVKKBkGJ+ZGYzuReHxdM5u6ijz\nB1UPm0io9HTy0vyNs0fqr6DsPRLFfeQqsyyXaPUcaxE2d9CX9h9hZxOKuN7XR+Mj\nAtH1osPTpntFEq5p91WBIZ5C5YDEvQWIdzp1/qThLq78LAldZewvwAGyh+a1iBya\nfOBwtOaMocvEBwW7Ab6hrgzf8I3iJ7zEfdYvBku8XhkvLL8Zs+alogrVsdmB875T\nTo7MmGS7AgMBAAECggEAHT/AAs3cxcCtvoeIGCOv0Rj33oEXuT4hUaA9/LZRYbq0\nzhuXqCky/5wxIUDvovlZIOewK5avI/VFTE5J/nWJiUw0c2iWGBztmDAa2W4YC3fM\nw+iM/QOAUxXbNJYLaCMev+8esW0+dKSCJQsxwARqYbes7jUO5NbZ6Utu8NPl9v3B\nEZMqbxt53tHZbjzvdRR3kUw52PfDfMRhBKN/1ql/HutbVSLvKvW7/Po80uirHHZO\niTMdx88Sf0eK+fFPSvHW9A3lvYAEqrgtcwf/bO3Gr6V8SzuI7gAUAM17uuENlzwO\nmRQyJltKBFLRDAIPh3xzwR2cZzhPV1pkSiWZREp3bQKBgQDYoxVyog0mmPYvPWr7\nGrHV985Q36AuiRLbYAo4gkGHnNVwAK2TnqQsY2ZpA5iAOTO8MSbo6jomT0W2tkjS\nksX6e8U2fNYVIT+aJL7Kj8qWmfKa+R0QAmk4pubbcjI7Z5WVx8ItTmadly7oxnnz\nOxwOVwRwnfJhAVRat3qkdt95fwKBgQDBf6w/JtDE6vcBAHz925BlUkoshGBaC7V6\nVCSIejppuULGZLiibxvbae/e9o5xN9Od1CUeTKuMC0RGXViK7H7nTpobqkHh9ti6\nBb7oDi2Ti1TdhlP79rOHzuZdj8wF9KhlWjPEBpD/n6kpajzfDs1OszOKkFeeCR5o\nSaN9ejcaxQKBgGwjbC9eqQXdUPZfyCk0OBVAr6I7HrBcCCetlyyCCMfzB6/zBrIr\nfHQT4ikFfHh1FVgZiPy2/vPkmj4MW+mRDnZslhMO2aaOhDsjoIFoqY3npuyo8VLu\ngSugVJiyNlTk7gxoPIt1GVANCYN0n6dEmEqoMTUuArFdgogOEpBKLl9tAoGBALW0\n1iSrp6rz1yZ6teWSFSQAxaTOXsjQbAhHEdOTrFzx2zIBDZ2D504BSn8/W34YZcG1\noXG1n/av8dp9+BLliTpfhrpqBNpUeysdECxMfCIs2nH4nc9j2S20boH38ii5mpUq\nwqfXXrydyzYYDLeO5996yvDZIV5Hw+U9GalQZoTdAoGAV2FaSFYZSetnUraNhTb6\n5TUylA3ELpW4wqPPjJy5Ikx1BWVe53DA4kWI3AZ659YiUrvBUQHlqqubATzfRQxx\nCVw+Xuo/1nWC2iwGy8asXKivz126E02VdmrKjvzKB41yac4KYHuPd5enunWFYxOU\nuOw3JVdFvHZqUO9uCqBHNPg=\n-----END PRIVATE KEY-----\n"; 	secretKey = net.dstone.common.utils.StringUtil.replace(secretKey, "-----BEGIN PRIVATE KEY-----", "");	secretKey = net.dstone.common.utils.StringUtil.replace(secretKey, "-----END PRIVATE KEY-----", "");	secretKey = secretKey.replaceAll("\\s+", "");	    byte[] keyBytes = java.util.Base64.getDecoder().decode(secretKey);    java.security.spec.PKCS8EncodedKeySpec keySpec = new java.security.spec.PKCS8EncodedKeySpec(keyBytes);    java.security.interfaces.RSAPrivateKey privateKey = (java.security.interfaces.RSAPrivateKey) java.security.KeyFactory.getInstance("RSA").generatePrivate(keySpec);    	java.time.Instant now = java.time.Instant.now();    String jwt = com.auth0.jwt.JWT.create()            .withIssuer(iss)            .withAudience(url)            .withClaim("scope", scope)            .withIssuedAt(now)            .withExpiresAt(now.plusSeconds(3600))            .sign(com.auth0.jwt.algorithms.Algorithm.RSA256(null, privateKey));	net.dstone.common.utils.WsUtil.Bean wsBean = new net.dstone.common.utils.WsUtil.Bean();		net.dstone.common.utils.DataSet paramDs = new net.dstone.common.utils.DataSet();	paramDs.setDatum("grant_type", "urn:ietf:params:oauth:grant-type:jwt-bearer");	paramDs.setDatum("assertion", jwt);			wsBean.url = url;	wsBean.method = method;			wsBean.addHeader("Content-Type", "application/x-www-form-urlencoded");	wsBean.setParameters(paramDs);		ws.execute(wsBean);	String responseStr = ws.response.outputStr.toString();		//System.out.println( "responseStr["+responseStr+"]" );	net.dstone.common.utils.DataSet resDs = new net.dstone.common.utils.DataSet();	resDs.buildFromJson(responseStr, "");		resDs.checkData();		System.out.println( "access_token:\n"+ resDs.getDatum("access_token") );	System.out.println("");	} catch (Exception e) {	e.printStackTrace();} finally{	net.dstone.common.utils.DateUtil.stopWatchEnd("00.웹호출");}